{
  "version": "1",

  "questions": [
    {
      "name": "payment_gateway",
      "text": "Which payment gateway do you want to generate a button for?",
      "options": [
        ["PayPal", "paypal"]
      ],
      "initialValue": "paypal"
    },
    {
      "name": "form",
      "text": "What sort of access do you want to sell?",
      "options": [
        ["Level + (optional) Custom Capabilities", "level"],
        ["Custom Capabilities", "ccaps"],
        ["Specific post/page access", "specific"]
      ]
    }
  ],

  "answersToFormMap": [
    {
      "answers": {
        "payment_gateway": "paypal",
        "form": "level"
      },
      "form": "paypal_levels"
    }
  ],

  "forms": {
    "paypal_levels": {
      "fields": {
        "payment_type": {
          "type": "dropdown",
          "options": [
            ["Recurring Payment", "recurring"],
            ["One-time Payment", "once"]
          ],
          "initialValue": "recurring"
        },

        "offer_trial": {
          "type": "checkbox",
          "initialValue": true
        },

        "trial_term_length": {
          "type": "text",
          "initialValue": "1"
        },
        "trial_term_period": {
          "type": "dropdown",
          "options": [
            ["Days", "D"],
            ["Weeks", "W"],
            ["Months", "M"],
            ["Years", "Y"]
          ],
          "initialValue": "W"
        },
        "trial_term_price_amount": {
          "type": "price",
          "initialValue": "0.00"
        },

        "after_term_once_price_amount": {
          "type": "price",
          "initialValue": "5.0"
        },
        "after_term_once_access_length": {
          "type": "text",
          "initialValue": "1"
        },
        "after_term_once_access_period": {
          "type": "dropdown",
          "options": [
            ["Days", "D"],
            ["Weeks", "W"],
            ["Months", "M"],
            ["Years", "Y"],
            ["Lifetime", "L"]
          ],
          "initialValue": "W"
        },

        "after_term_recurring_length": {
          "type": "text",
          "initialValue": "1"
        },
        "after_term_recurring_price_amount": {
          "type": "price",
          "initialValue": "10"
        },
        "after_term_recurring_period": {
          "type": "dropdown",
          "options": [
            ["Days", "D"],
            ["Weeks", "W"],
            ["Months", "M"],
            ["Years", "Y"],
            ["Lifetime", "L"]
          ],
          "initialValue": "M"
        },

        "description": {
          "type": "text",
          "initialValue": ""
        },

        "ccaps": {
          "type": "text",
          "initialValue": ""
        },

        "level": {
          "type": "level",
          "initialValue": "1"
        }
      },

      "formTemplate": [
        ["I want it to be a %payment_type%"],

        ["%offer_trial% I want to offer a trial/initial period"],
        [{ "if": { "offer_trial": true } }, "I'll offer the first %trial_term_length% %trial_term_period% for %trial_term_price_amount%"],

        [
          { "if": { "offer_trial": true, "payment_type": "once" } },
          "Then, I want to charge %after_term_once_price_amount% for access for %after_term_once_access_length% %after_term_once_access_period%"
        ],
        [
          { "if": { "offer_trial": false, "payment_type": "once" } },
          "I want to charge %after_term_once_price_amount% for access for %after_term_once_access_length% %after_term_once_access_period%"
        ],
        [
          { "if": {  "offer_trial": true, "payment_type": "recurring" } },
          "Then, I want to charge %after_term_recurring_price_amount% every %after_term_recurring_length% %after_term_recurring_period%"
        ],
        [
          { "if": {  "offer_trial": false, "payment_type": "recurring" } },
          "I want to charge %after_term_recurring_price_amount% every %after_term_recurring_length% %after_term_recurring_period%"
        ],

        ["Description %description%"],
        ["Custom Capabilities (comma separated) %ccaps%"],
        ["Level %level%"]
      ],

      "shortcode": {
        "states": [
          {
            "name": "buy_now",
            "and": [
              { "payment_type": ["=", "once"] },
              { "offer_trial":  ["=", false] }
            ]
          },
          {
            "name": "single_payment_subscription_with_trial",
            "and": [
              { "payment_type": ["=", "once"] },
              { "offer_trial":  ["=", true] }
            ]
          },
          {
            "name": "recurring_subscription_with_trial",
            "and": [
              { "payment_type": ["=", "recurring"] },
              { "offer_trial":  ["=", true] }
            ]
          },
          {
            "name": "recurring_subscription_without_trial",
            "and": [
              { "payment_type": ["=", "recurring"] },
              { "offer_trial":  ["=", false] }
            ]
          }
        ],
        "templates": {
          "buy_now": "[s2Member-PayPal-Button level=\"%level%\" ccaps=\"%ccaps%\" desc=\"%description%\" ps=\"paypal\" lc=\"US\" cc=\"USD\" dg=\"0\" ns=\"0\" custom=\"%custom%\" ra=\"%after_term_recurring_price_amount%\" rp=\"%after_term_once_access_length%\" rt=\"%after_term_recurring_period%\" rr=\"BN\" rrt=\"\" rra=\"1\" image=\"default\" output=\"button\" /]",
          "single_payment_subscription_with_trial": "[s2Member-PayPal-Button level=\"%level%\" ccaps=\"%ccaps%\" desc=\"%description%\" ps=\"paypal\" lc=\"US\" cc=\"USD\" dg=\"0\" ns=\"0\" custom=\"%custom%\" ta=\"%initial_term_price_amount%\" tp=\"%initial_term_length%\" tt=\"%initial_term_period%\" ra=\"%after_term_recurring_price_amount%\" rp=\"%after_term_once_access_length%\" rt=\"%after_term_recurring_period%\" rr=\"0\" rrt=\"\" rra=\"1\" image=\"default\" output=\"button\" /]",
          "recurring_subscription_with_trial": "[s2Member-PayPal-Button level=\"%level%\" ccaps=\"%ccaps%\" desc=\"%description%\" ps=\"paypal\" lc=\"US\" cc=\"USD\" dg=\"0\" ns=\"0\" custom=\"%custom%\" ta=\"%initial_term_price_amount%\" tp=\"%initial_term_length%\" tt=\"%initial_term_period%\" ra=\"%after_term_recurring_price_amount%\" rp=\"%after_term_once_access_length%\" rt=\"%after_term_recurring_period%\" rr=\"1\" rrt=\"\" rra=\"1\" image=\"default\" output=\"button\" /]",
          "recurring_subscription_without_trial": "[s2Member-PayPal-Button level=\"%level%\" ccaps=\"%ccaps%\" desc=\"%description%\" ps=\"paypal\" lc=\"US\" cc=\"USD\" dg=\"0\" ns=\"0\" custom=\"%custom%\" ta=\"%initial_term_price_amount%\" tp=\"%initial_term_length%\" tt=\"%initial_term_period%\" ra=\"%after_term_recurring_price_amount%\" rp=\"%after_term_once_access_length%\" rt=\"%after_term_recurring_period%\" rr=\"1\" rrt=\"\" rra=\"1\" image=\"default\" output=\"button\" /]"
        }
      }
    }
  }
}
